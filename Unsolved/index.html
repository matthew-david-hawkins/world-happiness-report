<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Scrollytelling Project</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  
  <!-- D3 -->
  <script src="https://d3js.org/d3.v5.min.js"></script>

  <!-- CSS for Scrollytelling -->
  <style>
    /* smooth helps when jumping between sections of the page */
    html {
      scroll-behavior: smooth;
    }

    .main {
      -webkit-overflow-scrolling: touch;
      transform: translate3d(0, 0, 0);
    }

    #scrollytelling {
      position: relative;
      background-color: white;
      /* padding: 1rem; */
    }

    article {
      z-index: 2 !important;
      position: relative;
      padding: 0 1rem;
      max-width: 40rem;
      margin: 0 auto;
      -webkit-transform: translate3d(0, 0, 0);
      -moz-transform: translate3d(0, 0, 0);
      transform: translate3d(0, 0, 0);
    }

    figure {
      z-index: 1 !important;
      position: -webkit-sticky;
      position: sticky;
      left: 0;
      width: 100%;
      min-height: 480px;
      margin: 0;
      -webkit-transform: translate3d(0, 0, 0);
      -moz-transform: translate3d(0, 0, 0);
      transform: translate3d(0, 0, 0);
      background-color: white;
    }

    figure img {
      position:absolute;
      left:0;
      -webkit-transition: opacity 0.25s ease-out;
      -moz-transition: opacity 0.25s ease-out;
      -o-transition: opacity 0.25s ease-out;
      transition: opacity 0.25s ease-out;
    }

    .step {
      position: relative;
      transition-duration: 0.25s;
      transition-timing-function: linear;
      margin: 0 auto 2rem auto;
      color: black;
      z-index: 2;
    }

    .step.last-child {
      margin-bottom: 0;
    }

    .step.is-active {
      color: black;
    }

    .step p {
      position: relative;
      text-align: center;
      padding: 1rem;
      font-size: 10rem;
      background-color: #fdf6ef;
      z-index: 2;
      border: 2px solid #282828;
      opacity: 0.95
    }

  </style>
</head>

<body>

    
    <!-- Scrollama Container -->
    <main id="top">

      <!-- Scrollytelling Intro -->
      <section id="intro">
        <div class="container">
          <div class="row">
            <div class="col">
            </div>
            <div class="col-8">
              <p><br></p>
              <h1 style="text-align:center">Where The World Is Becoming Happier</h1>
              <h4 style="text-align:center">A Scrollytelling Project</h4>
              <p><br></p>
              <p>In 2012, the United Nations published their first <a href="https://worldhappiness.report/">The World Happiness Report</a>. Since then, updates to this report have analyzed data collected from 2005 to 2019 on happiness around the world.
                This report highlights a continuing problem -- Some of the world's economic powerhouses, while increasing their Gross National Product (GNP), which is a measure of the dollar value of all the goods and services produced in a nation, show no significant increase in happiness.
                For example, while the per-person GNP of the U.S. has increased three-fold over the previous half century, its inhabitants reported no significant change in happiness over that period. This massive increase in productivity, which continues to the present day, has come at a 
                major cost to the environment, but without actually the people of the U.S. any happier.<br><br>A possible way out of this destructive trend comes from the small nation of Bhutan, where in 1972, the nation's king committed his government to increasing what he termed 
                "Gross National Happiness."<br><br>The World Happiness report uses the Gallup World Poll, where respondents are asked to evaluate the quality of their lives on an ladder scale running
                from 0 to 10, with the bottom rung of the ladder (0) being the worst possible life for them and 10 being the
                best possible. <br><br>The story below highlights the nations where its people show significant changes in this self-evaluation of happiness.</p>
                <p><br></p> 
            </div>
            <div class="col">
            </div>
          </div>
        </div>
 

      </section>

      <!-- Main Scrollytelling Section -->
      <section id="scrollytelling">

        <figure>

          <!-- This div just helps to center the images -->
          <div style="text-align:center; height:100%; width:100%; overflow:hidden">
            <!-- Individual Images -->
            <img src="Vizualization1.svg" alt="Map1" width ="100%" id="imgV1" style="opacity:1">
            <img src="Vizualization2.svg" alt="Map2" width ="100%" id="imgV2" style="opacity:0">
            <img src="Vizualization3.svg" alt="Map3" width ="100%" id="imgV3" style="opacity:0">
            <img src="Vizualization4.svg" alt="Map1" width ="100%" id="imgV4" style="opacity:0">
            <img src="Vizualization5.svg" alt="Map1" width ="100%" id="imgV5" style="opacity:0">
            <img src="Vizualization6.svg" alt="Map1" width ="100%" id="imgV6" style="opacity:0">
            <img src="Vizualization7.svg" alt="Map1" width ="100%" id="imgV7" style="opacity:0">
            <img src="Vizualization8.svg" alt="Map1" width ="100%" id="imgV8" style="opacity:0">
          </div>
        </figure>

        <!-- Prose about the album. Each div is a  point about the different versions of the figure -->
        <article>

          <!-- Message #1 -->
          <div class="step" data-scrollama-index="0">
            <p>#1</p>
          </div>
          
          <!-- Message #2 -->
          <div class="step" data-scrollama-index="1">
            <p>#2</p>
          </div>

          <!-- Message #3 -->
          <div class="step" data-scrollama-index="2">
            <p>#3</p>
          </div>

          <!-- Message #4 -->
          <div class="step" data-scrollama-index="3">
            <p>#4</p>
          </div>

          <!-- Message #5 -->
          <div class="step" data-scrollama-index="4">
            <p>#5</p>
          </div>

          <!-- Message #6 -->
          <div class="step" data-scrollama-index="5">
            <p>#6</p>
          </div>

          <!-- Message #7 -->
          <div class="step" data-scrollama-index="6">
            <p>#7</p>
          </div>

        </article>

      </section>

      <section id="outro">
        <p style="text-align : center"><br><a href="#top">Start Again</a><br></p>
      </section>
    
    </main>

    <p style="text-align : center"><br><a href="https://www.thrum.engineering/scrollytelling">Learn More About Scrollytelling</a><br></p>
  <!-- Scrollama javaScript -->
  <script src="https://unpkg.com/intersection-observer"></script>
  <script src="https://unpkg.com/scrollama"></script>

  <!-- Scrollytelling JavaScript -->
  <script>

    // Save different parts of the page as D3.js objects. Using d3 for convenience
    var main = d3.select('main')
    var scrollySection = main.select('#scrollytelling');
    var figure = scrollySection.select('figure');
    var article = scrollySection.select('article');
    var steps = scrollySection.selectAll('.step');

    var imgV1 = d3.select('#imgV1');
    var imgV2 = d3.select('#imgV2');
    var imgV3 = d3.select('#imgV3');
    var imgV4 = d3.select('#imgV4');
    var imgV5 = d3.select('#imgV5');
    var imgV6 = d3.select('#imgV6');
    var imgV7 = d3.select('#imgV7');
    var imgV8 = d3.select('#imgV8');

    // Create a scrollama object.
    var myScrollama = scrollama();

    // @TODO: Set the stepH, figureHeight, and figureMarginTop constants

    // generic window resize listener event
    function handleResize() {
      
      console.log("handling resize")

      // @TODO: Use `d3.json` to update height of step elements

      // @TODO: Update the height, top, and z-index of the figure elements

      // @TODO: Set the z-index of the article element

      // Tell scrollama to update new element dimensions
      myScrollama.resize();

    }

    // scrollama event handler
    function handleStepChange(response) {
      
      switch(response.index) {
        case 0:
          // Set image to first version
          imgV1.style("opacity", "1")
          imgV2.style("opacity", "0")
          imgV3.style("opacity", "0")
          imgV4.style("opacity", "0")
          imgV5.style("opacity", "0")
          imgV6.style("opacity", "0")
          imgV7.style("opacity", "0")
          imgV8.style("opacity", "0")
          break;

        case 1:
          // @TODO: Set image to 2nd version
          break;

        case 2:
          // @TODO: Set image to 3rd version
          break;

        case 3:
          // @TODO: Set image to 4th version
          break;

        case 4:
          // @TODO: Set image to 5th version
          break;

        case 5:
          // @TODO: Set image to 6th version
          break;

        case 6:
        // @TODO: Set image to 7th version
        break;

        case 7:
        // @TODO: Set image to 8th version
        break;

        default:
          // do nothing
      }

      // change the class of the step divs to indicate which step is active
      steps.classed('is-active', function (d, i) {
        return i === response.index;
      })

    }

    function init() {

      handleResize();

      // @TODO: Create the myScrollama.setup() function
        
      // setup resize event
      window.addEventListener('resize', handleResize);
    }

    // kick things off
    init();
  </script>

</body>

</html>
